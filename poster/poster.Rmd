---
title: Predicting the Bechdel Test through Statistical Modeling 
author:
  - name: Hailey Quintavalle
affiliation:
  - address: Department of Math, Computer Science, and Statistics, St. Lawrence University 
  - adress: Advisor - Matt Higham
column_numbers: 3
logoright_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png
logoleft_name: https&#58;//raw.githubusercontent.com/brentthorne/posterdown/master/images/betterhexlogo.png
output: 
  posterdown::posterdown_html:
    self_contained: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# Abstract

**Goal**: Investigate which aspects of a movie increase the likelihood of passing the Bechdel Test

- Combined IMDb data with Bechdel Test Movie List

- Logistic regression used to model release year and genres 

- Further analysis examines budget, IMDb user ratings, Metascore ratings 


# Background

## What is the **Bechdel Test**?

- Created by Alison Bechdel in 1986
- Originally a comic strip 
- Used to assess the presence of women in movies [reference]

```{r}
## knitr::include_graphics(here::here("poster/bechdelTest.jpg"))
```


To pass, movie must pass 3 tests:

1. At least **2** named female characters
2. Women must talk to each other
3. Conversation about something *other than a man* [reference]

**Flaws** of the Bechdel Test

- Too simple requirements
- Disregards which kinds of women have dialogue [1]
  - Age
  - Race


```{r echo = F, message = F, warning = F}
library(tidyverse)
basics_movies <- read_csv("data/basics_movies.csv")

table1 <- basics_movies |> 
  select(originalTitle, year, genres, runtimeMinutes, imdbid) |> 
  filter(originalTitle == "Grown Ups" | originalTitle == "Bullet Train" | originalTitle == "Star Wars")

movies_api <- read_csv("data/movies_api.csv")

table2 <- movies_api |> 
  select(-id) |> 
  filter(title == "Grown Ups" | title == "Bullet Train" | title == "Star Wars")

```



# Data

- *Data Source:* IMDb Non-Commercial Datasets

```{r mytable1, out.width='80%'}
knitr::kable(table1[1:3, 1:4], caption = 'IMDb Data',align = 'c',"html")
```

- *Data Source:* Bechdel Test Movie List (bechdeltest.com)

```{r mytable2, out.width='80%'}
knitr::kable(table2[1:3, 1:4], caption = 'API Data',align = 'c',"html")
```


- Final data set contains **10,178** movies - ranging from 1874 to 2023








# Primary Model 

$logit(pi) = Beta_0 + Beta_1X_1 + ...)$  <-- type part of the final model here

```{r echo = F, message = F, warning = F, cache = T}
library(tidyverse)
movies_indi <- read_csv("data/movies_indicator.csv")

new_grid <- read_csv("data/movies_grid1.csv")
library(modelr)
library(broom)

mod3 <- glm(factor(binary) ~ year + Animation + Action + Adult + Adventure +
              Biography + Comedy + Crime + Documentary + Drama +
              Family + Fantasy + History + Horror + Music +
              Musical + Mystery + Romance + Short + Sport +
              Thriller + War + Western +
              year:Animation + year:Action + year:Adult + year:Adventure +
              year:Biography + year:Comedy + year:Crime + year:Documentary + year:Drama +
              year:Family + year:Fantasy + year:History + year:Horror + year:Music +
              year:Musical + year:Mystery + year:Romance + year:Short + year:Sport +
              year:Thriller + year:War + year:Western, 
            family = "binomial", data = movies_indi)

aug_mod3 <- augment(mod3, newdata = new_grid, se_fit = TRUE)

aug_mod3 <- aug_mod3 |> mutate(.pi = exp(.fitted) / (1 + exp(.fitted)))

list3 <- aug_mod3 |> pivot_longer(cols = c(Animation, Action, Adult, Adventure, Biography, Comedy, 
                                           Crime, Documentary, Drama, Family, Fantasy, History, 
                                           Horror, Music, Musical, Mystery, Romance, Short, 
                                           Sport, Thriller, War, Western), names_to = "genre", 
                                  values_to = "values")

movies_pass <- movies_indi |> filter(binary == 1)
movies_fail <- movies_indi |> filter(binary == 0)

list3 |> filter(values == 1, genre %in% c("Sport", "Comedy", "Romance", "Action", "Documentary", "War", "Western")) |> 
  mutate(genre = fct_reorder2(genre, .x = year, .y = .pi)) |>
  ggplot(aes(x = year, y = .pi)) +                      # need to pick which genres to keep in visual
  geom_line(aes(color = genre), linewidth = 0.8) + 
  geom_rug(data = movies_pass, aes(x = year, y = as.numeric(binary)), sides = "t") +  ## alpha = 0.4
  geom_rug(data = movies_fail, aes(x = year, y = as.numeric(binary)), sides = "b") +  
  scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0, 1)) + 
  theme_minimal() +
  labs(x = "\nYear",
       y = "Probabilty of Passing\n", 
       color = "Genre",
       title = "Different Genres Passing the Bechdel Test Over Time") +
  scale_color_viridis_d()  ## make font and lines bigger for poster
```










# Further Analysis

Aliquam sed faucibus risus, quis efficitur erat. Vestibulum semper mauris quis tempus eleifend. Aliquam sagittis dictum ipsum, quis viverra ligula eleifend ut. Curabitur sagittis vitae arcu eget faucibus. In non elementum felis. Duis et aliquam nunc. Nunc pulvinar sapien nunc, vel pretium nisi efficitur in. Fusce fringilla maximus leo et maximus. Fusce at ligula laoreet, iaculis mi at, auctor odio. Praesent sed elementum justo. Aenean consectetur risus rhoncus tincidunt efficitur. Praesent dictum mauris at diam maximus maximus [@R-posterdown].

# Conclusion / Limitations

Try `posterdown` out! Hopefully you like it!

```{r, include=FALSE}
knitr::write_bib(c('knitr','rmarkdown','posterdown','pagedown'), 'packages.bib')
```

# References

1. <https://www.tandfonline.com/doi/full/10.1080/14680777.2016.1234239>

2. [Key Female Characters in Film Have More to Talk About Besides Men: Automating the Bechdel Test](https://aclanthology.org/N15-1084) (Agarwal et al., NAACL 2015)



